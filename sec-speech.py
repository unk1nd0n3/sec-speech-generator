# -*- coding: utf-8 -*-
try:
    from gtts import gTTS
except ImportError:
    print("pip install gTTS")
try:
    from pygame import mixer
except ImportError:
    print("pip install pygame")

import sys
from time import sleep
from os import remove
from random import randint

speech_frases_ru = [[u"Как известно",
                    u"По нашему опыту",
                    u"Еще раз повторю",
                    u"Уже становится неоспоримой истиной, что",
                    u"Следует помнить, что",
                    u"Вот, что стоит понять и принять",
                    u"Большинство экспертов уверены, что",
                    u"Мы уже не однократно говорили о том, что",
                    u"Стоит отметить, что",
                    u"Не зря считается, что"],

                    [u"Использование DLP/UBA/EDR/SIEM/IGA/CASB ...",
                    u"Приверженность комплексному и системному подходу к ИБ",
                    u"Строительство собственного SОС",
                    u"Управление рисками ИБ",
                    u"Переход на аутсорсинг ИБ",
                    u"Пересмотр модели актуальных угроз",
                    u"Усиление внимания на проблеме Shadow IT",
                    u"Принятие концепции Реорle-Centric Security",
                    u"Любовь к Threat Intelligence и Threat Hunting",
                    u"Взаимодействие с СБУ"],

                    [u"Укрепляет авторитет подразделения ИБ",
                    u"Позволяет правильно расставить приоритеты",
                    u"Стимулирует к повышению зрелости всех процессов И Б",
                    u"Требует адаптации западных «лучших» практик под российские реалии",
                    u"Обычно приводит к повышению эффективности ИБ",
                    u"В конечном счете помогает значительно экономить ресурсы подразделения ИБ",
                    u"Часто выводит ИБ на новый уровень",
                    u"Поначалу может вызывать сопротивление со стороны некоторых заинтересованных подразделений, и с этим надо работать",
                    u"Помогает укрепить связь между ИБ, ИТ и «бизнесом»",
                    u"Требует серьезной предварительной подготовки и грамотного планирования"],

                    [u"К сожалению, на практике эту идею могут правильно реализовать лишь очень настойчивые и требовательные руководители",
                    u"Именно этот тренд сейчас набирает популярность в Мире",
                    u"Стоит помнить, что именно в эту сторону и смотрят в настоящий момент наши регуляторы",
                    u"И это важный шаг в сторону «ИБ нового поколения»",
                    u"К сожалению, этому не учат в университетах, а получать необходимые знания и опыт придется самостоятельно",
                    u"А это, в свою очередь, принесет руководству дополнительные очки в глазах акционеров компании",
                    u"Это получается не у всех, но историй успеха уже много",
                    u"Это важная, но не единственная задача подразделения ИБ, но начать можно именно с этого",
                    u"Для дальнейшего совершенствования всей системы ИБ",
                    u"Да, это не просто. Но никто и не говорил, что будет легко..."]]


def generate_sentence():
    return " ".join([speech_frases_ru[0][randint(0, 5)],
                     speech_frases_ru[1][randint(0, 5)],
                     speech_frases_ru[2][randint(0, 5)],
                     speech_frases_ru[3][randint(0, 5)]]) + ". "


def main():
    if len(sys.argv) == 2:
        sentence_count = int(sys.argv[1])
    else:
        sentence_count = 10
    text = "".join([generate_sentence() for _ in xrange(sentence_count)])
    print(text)
    tts = gTTS(text=text, lang="ru")
    audio_file = "speech.mp3"
    tts.save(audio_file)
    mixer.init()
    mixer.music.load(audio_file)
    mixer.music.play()
    while mixer.music.get_busy():
        sleep(1)
    mixer.quit()


if __name__ == "__main__":
    main()
